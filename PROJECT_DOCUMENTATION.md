# ğŸ¥ HEALTH IOT - TÃ€I LIá»†U Dá»° ÃN Tá»”NG Há»¢P

> **Há»‡ thá»‘ng chÄƒm sÃ³c sá»©c khá»e tá»« xa thÃ´ng minh vá»›i AI, IoT vÃ  Telemedicine**

---

## ğŸ“‘ Má»¤C Lá»¤C

- [Tá»•ng Quan Dá»± Ãn](#-tá»•ng-quan-dá»±-Ã¡n)
- [Kiáº¿n TrÃºc Há»‡ Thá»‘ng](#-kiáº¿n-trÃºc-há»‡-thá»‘ng)
- [CÃ´ng Nghá»‡ Sá»­ Dá»¥ng](#-cÃ´ng-nghá»‡-sá»­-dá»¥ng)
- [CÃ¡c Module ChÃ­nh](#-cÃ¡c-module-chÃ­nh)
- [Luá»“ng Dá»¯ Liá»‡u](#-luá»“ng-dá»¯-liá»‡u)
- [TÃ­nh NÄƒng Ná»•i Báº­t](#-tÃ­nh-nÄƒng-ná»•i-báº­t)
- [Báº£o Máº­t](#-báº£o-máº­t)
- [TÃ i Liá»‡u Chi Tiáº¿t](#-tÃ i-liá»‡u-chi-tiáº¿t)
- [Roadmap](#-roadmap)

---

## ğŸ¯ Tá»”NG QUAN Dá»° ÃN

**Health IoT** lÃ  má»™t há»‡ thá»‘ng chÄƒm sÃ³c sá»©c khá»e toÃ n diá»‡n káº¿t há»£p:

### Má»¥c TiÃªu
- ğŸ¥ **Telemedicine**: Káº¿t ná»‘i bá»‡nh nhÃ¢n - bÃ¡c sÄ© tá»« xa
- ğŸ“Š **IoT Monitoring**: Theo dÃµi sá»©c khá»e real-time qua thiáº¿t bá»‹ Ä‘eo
- ğŸ¤– **AI Diagnosis**: Cháº©n Ä‘oÃ¡n sÆ¡ bá»™ báº±ng Machine Learning
- ğŸ’Š **E-Prescription**: KÃª Ä‘Æ¡n thuá»‘c Ä‘iá»‡n tá»­
- ğŸ“± **Mobile-First**: á»¨ng dá»¥ng Ä‘a ná»n táº£ng (Android, iOS, Windows)

### ThÃ nh Pháº§n Há»‡ Thá»‘ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     HEALTH IOT ECOSYSTEM                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   MOBILE APP â”‚   â”‚  WEB ADMIN   â”‚   â”‚  ESP32 IoT   â”‚    â”‚
â”‚  â”‚   (Flutter)  â”‚   â”‚  (Next.js)   â”‚   â”‚  (C++/MQTT)  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                  â”‚                   â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                            â”‚                                 â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                   â”‚  BACKEND SERVER â”‚                        â”‚
â”‚                   â”‚   (Node.js)     â”‚                        â”‚
â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
â”‚                   â”‚ â€¢ REST API      â”‚                        â”‚
â”‚                   â”‚ â€¢ Socket.IO     â”‚                        â”‚
â”‚                   â”‚ â€¢ MQTT Broker   â”‚                        â”‚
â”‚                   â”‚ â€¢ AI/ML Models  â”‚                        â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                            â”‚                                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚              â”‚             â”‚              â”‚                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚     â”‚ PostgreSQL â”‚  â”‚  HiveMQ    â”‚  â”‚ Cloudinary â”‚         â”‚
â”‚     â”‚ TimescaleDBâ”‚  â”‚   Cloud    â”‚  â”‚  Firebase  â”‚         â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ KIáº¾N TRÃšC Há»† THá»NG

### Kiáº¿n TrÃºc Tá»•ng Thá»ƒ: **Microservices + IoT**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLIENT LAYER (Presentation)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸ“± Flutter Mobile App          ğŸ–¥ï¸ Next.js Web Admin        â”‚
â”‚  â€¢ Patient Interface            â€¢ Doctor/Admin Dashboard     â”‚
â”‚  â€¢ Doctor Interface             â€¢ Analytics & Reports        â”‚
â”‚  â€¢ Real-time Monitoring         â€¢ User Management            â”‚
â”‚  â€¢ Video Calling (Zego)         â€¢ System Configuration       â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ HTTPS/WSS
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 APPLICATION LAYER (Backend)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸš€ Node.js + Express.js Server (Port 3000)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  API Gateway                                          â”‚   â”‚
â”‚  â”‚  â€¢ Authentication (JWT)                               â”‚   â”‚
â”‚  â”‚  â€¢ Rate Limiting                                      â”‚   â”‚
â”‚  â”‚  â€¢ Request Validation                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   REST API   â”‚  â”‚  Socket.IO   â”‚  â”‚ MQTT Client  â”‚      â”‚
â”‚  â”‚   Services   â”‚  â”‚   Gateway    â”‚  â”‚   Worker     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                 â”‚                   â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                           â”‚                                  â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚                                    â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Business   â”‚                  â”‚   AI/ML Engine   â”‚     â”‚
â”‚  â”‚   Logic      â”‚                  â”‚                  â”‚     â”‚
â”‚  â”‚   Services   â”‚                  â”‚ â€¢ MLP Model      â”‚     â”‚
â”‚  â”‚              â”‚                  â”‚ â€¢ CNN Model      â”‚     â”‚
â”‚  â”‚ â€¢ Auth       â”‚                  â”‚ â€¢ TensorFlow.js  â”‚     â”‚
â”‚  â”‚ â€¢ Appointmentâ”‚                  â”‚ â€¢ Prediction     â”‚     â”‚
â”‚  â”‚ â€¢ Chat       â”‚                  â”‚ â€¢ Analysis       â”‚     â”‚
â”‚  â”‚ â€¢ Health     â”‚                  â”‚                  â”‚     â”‚
â”‚  â”‚ â€¢ Prescription                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”‚ â€¢ Notification                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA LAYER (Storage)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸ—„ï¸  PostgreSQL 16 + TimescaleDB                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â€¢ Users & Profiles          â€¢ Appointments          â”‚   â”‚
â”‚  â”‚  â€¢ Health Records            â€¢ Prescriptions         â”‚   â”‚
â”‚  â”‚  â€¢ IoT Data (Time-series)    â€¢ Chat Messages         â”‚   â”‚
â”‚  â”‚  â€¢ AI Predictions            â€¢ Notifications         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  â˜ï¸  External Services                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   HiveMQ     â”‚  â”‚  Cloudinary  â”‚  â”‚   Firebase   â”‚      â”‚
â”‚  â”‚   Cloud      â”‚  â”‚  (Images)    â”‚  â”‚   (FCM/Push) â”‚      â”‚
â”‚  â”‚  (MQTT)      â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ MQTT Protocol
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  IoT DEVICE LAYER                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸ“¡ ESP32 Health Monitor                                     â”‚
â”‚  â€¢ MAX30102 (Heart Rate, SpO2)                              â”‚
â”‚  â€¢ MLX90614 (Temperature)                                    â”‚
â”‚  â€¢ AD8232 (ECG Signal)                                       â”‚
â”‚  â€¢ WiFi + MQTT Publisher                                     â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» CÃ”NG NGHá»† Sá»¬ Dá»¤NG

### Frontend Technologies

#### ğŸ“± Mobile App (Flutter)
```yaml
Framework: Flutter 3.24.0+
Language: Dart 3.9+
Platforms: Android, iOS, Windows

Core Packages:
  - go_router: ^17.0.1           # Navigation
  - provider: ^6.1.5             # State management
  - socket_io_client: ^3.1.2     # Real-time chat
  - zego_uikit_prebuilt_call: 4.22.2  # Video calls
  - fl_chart: ^1.1.1             # Charts
  - firebase_messaging: ^16.1.0  # Push notifications
  - http: ^1.2.1                 # API client
```

#### ğŸ–¥ï¸ Web Admin (Next.js)
```json
Framework: Next.js 14.2
Language: TypeScript 5.x
UI Library: React 18.3

Tech Stack:
  - Tailwind CSS + shadcn/ui     # Styling
  - TanStack Query               # Data fetching
  - TanStack Table               # Data tables
  - Radix UI                     # Components
  - Lucide React                 # Icons
```

### Backend Technologies

#### âš¡ API Server (Node.js)
```json
Runtime: Node.js 20.x
Framework: Express.js 4.19
Language: JavaScript ES6+

Core Dependencies:
  - pg: ^8.16.3                  # PostgreSQL client
  - socket.io: ^4.8.1            # WebSocket
  - mqtt: ^5.14.1                # MQTT protocol
  - jsonwebtoken: ^9.0.2         # JWT auth
  - bcrypt: ^6.0.0               # Password hashing
  - @tensorflow/tfjs-node: ^4.22.0  # AI/ML
  - firebase-admin: ^13.6.0      # FCM
  - cloudinary: ^2.8.0           # Image storage
  - nodemailer: ^7.0.10          # Email
  - node-cron: ^4.2.1            # Scheduled jobs
```

### Database & Storage

#### ğŸ—„ï¸ Database
```
Primary: PostgreSQL 16
Extension: TimescaleDB 2.0+ (Time-series data)

Features:
  - JSONB for flexible schemas
  - Full-text search
  - Hypertables for IoT data
  - Continuous aggregates
  - Data retention policies
```

#### â˜ï¸ Cloud Services
```
HiveMQ Cloud:
  - MQTT broker for IoT devices
  - TLS/SSL encryption
  - QoS levels 0,1,2

Cloudinary:
  - Image/file storage
  - On-the-fly transformations
  - CDN delivery

Firebase:
  - Cloud Messaging (FCM)
  - Push notifications
  - Analytics
```

### IoT Technologies

#### ğŸ“¡ ESP32 Firmware
```cpp
Platform: ESP32 DevKit v1
Framework: Arduino + PlatformIO
Language: C++11

Libraries:
  - WiFi.h                 # WiFi connectivity
  - PubSubClient.h         # MQTT client
  - ArduinoJson.h          # JSON parsing
  - Wire.h                 # I2C communication
  
Sensors:
  - MAX30102: Heart rate, SpO2 (I2C)
  - MLX90614: Temperature (I2C)
  - AD8232: ECG signal (Analog)

Communication:
  - MQTT over TLS (Port 8883)
  - JSON payload format
  - Publish interval: 500ms
```

### AI/ML Technologies

#### ğŸ¤– Machine Learning Models
```
Framework: TensorFlow.js Node

Model 1: Heart Disease Prediction
  - Type: MLP (Multi-Layer Perceptron)
  - Input: 11 features
  - Output: Risk level (0-2)
  - Accuracy: 89.3%
  - Features: Age, HR, SpO2, Temp, BP, BMI, etc.

Model 2: ECG Classification
  - Type: CNN (Convolutional Neural Network)
  - Input: 187 ECG samples
  - Output: 5 classes
  - Classes: Normal, PVC, PAC, RBBB, LBBB
```

---

## ğŸ”§ CÃC MODULE CHÃNH

### 1ï¸âƒ£ HealthAI_Server (Backend API)

**ÄÆ°á»ng dáº«n**: `e:\Fluter\HealthAI_Server\`

**MÃ´ táº£**: Backend API server xá»­ lÃ½ toÃ n bá»™ business logic, authentication, database, AI/ML, vÃ  real-time communication.

**Chi tiáº¿t**: [Xem tÃ i liá»‡u Ä‘áº§y Ä‘á»§](./HealthAI_Server/DOCUMENTATION.md)

**ThÆ° má»¥c chÃ­nh**:
```
HealthAI_Server/
â”œâ”€â”€ config/           # Cáº¥u hÃ¬nh (DB, MQTT, email, etc.)
â”œâ”€â”€ controllers/      # Request handlers (API endpoints)
â”œâ”€â”€ middleware/       # Auth, validation, error handling
â”œâ”€â”€ models/           # Database models & queries
â”œâ”€â”€ routes/           # API routing
â”œâ”€â”€ services/         # Business logic layer
â”œâ”€â”€ workers/          # Background jobs (MQTT, cron)
â”œâ”€â”€ database/         # Migrations & seed data
â”œâ”€â”€ app.js            # Express app entry
â””â”€â”€ socket_manager.js # Socket.IO configuration
```

**Port**: 3000 (HTTP), WebSocket

**API Endpoints**: 100+ endpoints

**TÃ­nh nÄƒng chÃ­nh**:
- âœ… RESTful API vá»›i JWT authentication
- âœ… Socket.IO real-time messaging
- âœ… MQTT worker thu tháº­p IoT data
- âœ… AI/ML prediction service
- âœ… Cron jobs tá»± Ä‘á»™ng
- âœ… Email & push notifications

---

### 2ï¸âƒ£ App (Flutter Mobile Application)

**ÄÆ°á»ng dáº«n**: `e:\Fluter\App\`

**MÃ´ táº£**: á»¨ng dá»¥ng di Ä‘á»™ng Ä‘a ná»n táº£ng cho bá»‡nh nhÃ¢n vÃ  bÃ¡c sÄ©.

**Chi tiáº¿t**: [Xem tÃ i liá»‡u Ä‘áº§y Ä‘á»§](./App/DOCUMENTATION.md)

**Cáº¥u trÃºc**:
```
App/lib/
â”œâ”€â”€ config/           # App configuration
â”œâ”€â”€ core/             # Core utilities, API client
â”œâ”€â”€ models/           # Data models (User, Appointment, etc.)
â”œâ”€â”€ presentation/     # UI layers
â”‚   â”œâ”€â”€ screens/      # App screens
â”‚   â”œâ”€â”€ widgets/      # Reusable widgets
â”‚   â””â”€â”€ providers/    # State management
â”œâ”€â”€ service/          # Services (Socket, Zego, Auth)
â””â”€â”€ main.dart         # Entry point
```

**Platforms**: Android (API 23+), iOS (13.0+), Windows (10+)

**TÃ­nh nÄƒng chÃ­nh**:
- âœ… ÄÄƒng kÃ½/ÄÄƒng nháº­p (Patient & Doctor)
- âœ… Äáº·t lá»‹ch khÃ¡m vá»›i bÃ¡c sÄ©
- âœ… Video call HD (ZegoCloud)
- âœ… Real-time chat (Socket.IO)
- âœ… Theo dÃµi sá»©c khá»e real-time (MQTT)
- âœ… AI cháº©n Ä‘oÃ¡n sÆ¡ bá»™
- âœ… E-prescription
- âœ… Medication reminders
- âœ… Health trend charts

---

### 3ï¸âƒ£ ESP32_firmware (IoT Health Monitor)

**ÄÆ°á»ng dáº«n**: `e:\Fluter\ESP32_firmware\`

**MÃ´ táº£**: Firmware cho thiáº¿t bá»‹ Ä‘eo theo dÃµi sá»©c khá»e dá»±a trÃªn ESP32.

**Chi tiáº¿t**: [Xem tÃ i liá»‡u Ä‘áº§y Ä‘á»§](./ESP32_firmware/DOCUMENTATION.md)

**Cáº¥u trÃºc**:
```
ESP32_firmware/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.cpp           # Main program
â”‚   â””â”€â”€ ecg_monitor.py     # ECG testing script
â”œâ”€â”€ include/
â”‚   â””â”€â”€ web_interface.h    # WiFi config web UI
â”œâ”€â”€ platformio.ini         # PlatformIO config
â””â”€â”€ lib/                   # External libraries
```

**Hardware**:
- **MCU**: ESP32 DevKit v1 (240MHz dual-core)
- **Sensors**:
  - MAX30102: Heart rate & SpO2 (I2C)
  - MLX90614: Non-contact temperature (I2C)
  - AD8232: ECG signal (Analog ADC)
- **Communication**: WiFi + MQTT

**Chá»©c nÄƒng**:
- âœ… Äo nhá»‹p tim real-time (BPM)
- âœ… Äo ná»“ng Ä‘á»™ oxy mÃ¡u (SpO2 %)
- âœ… Äo nhiá»‡t Ä‘á»™ cÆ¡ thá»ƒ (Â°C)
- âœ… Ghi tÃ­n hiá»‡u ECG (125Hz sampling)
- âœ… Web interface cáº¥u hÃ¬nh WiFi
- âœ… MQTT publish data (500ms interval)
- âœ… LED status indicator

**MQTT Topics**:
```
health/medical/data     â†’ {userID, temp, spo2, hr}
health/ecg/data         â†’ {userID, device_id, packet_id, dataPoints[]}
```

---

### 4ï¸âƒ£ Web_admin (Admin Dashboard)

**ÄÆ°á»ng dáº«n**: `e:\Fluter\Web_admin\`

**MÃ´ táº£**: Dashboard quáº£n trá»‹ há»‡ thá»‘ng cho admin vÃ  bÃ¡c sÄ©.

**Chi tiáº¿t**: [Xem tÃ i liá»‡u Ä‘áº§y Ä‘á»§](./Web_admin/DOCUMENTATION.md)

**Tech Stack**:
- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS + shadcn/ui
- TanStack Query & Table

**TÃ­nh nÄƒng chÃ­nh**:
- âœ… Dashboard analytics tá»•ng quan
- âœ… Quáº£n lÃ½ users (patients, doctors)
- âœ… Quáº£n lÃ½ appointments
- âœ… Xem health records & IoT data
- âœ… Quáº£n lÃ½ prescriptions
- âœ… System logs & monitoring
- âœ… Export reports (PDF, Excel)

---

## ğŸ”„ LUá»’NG Dá»® LIá»†U

### Luá»“ng 1: IoT Data Flow (Real-time Monitoring)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ESP32     â”‚  1. Äá»c cáº£m biáº¿n má»—i 500ms
â”‚   Device    â”‚  â€¢ Heart Rate: 75 BPM
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â€¢ SpO2: 98%
       â”‚         â€¢ Temperature: 36.5Â°C
       â”‚ 2. MQTT Publish
       â”‚ Topic: health/medical/data
       â”‚ Payload: {"userID":10, "hr":75, "spo2":98, "temp":36.5}
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HiveMQ Cloud  â”‚  3. MQTT Broker
â”‚   Broker        â”‚  â€¢ QoS: 1 (At least once)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 4. Subscribe
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Server     â”‚  5. MQTT Worker nháº­n data
â”‚  mqtt_worker.js     â”‚  â€¢ Parse JSON
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Validate data
       â”‚
       â”‚ 6. LÆ°u vÃ o DB
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL        â”‚  7. INSERT INTO health_records
â”‚   TimescaleDB       â”‚  (user_id, heart_rate, spo2, temperature)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 8. AI Prediction
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TensorFlow.js      â”‚  9. Run MLP Model
â”‚  MLP Model          â”‚  â€¢ Input: [hr, spo2, temp, ...]
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Output: Risk Level
       â”‚
       â”‚ 10. Náº¿u High Risk â†’ Alert
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Notification       â”‚  11. Gá»­i cáº£nh bÃ¡o
â”‚  Service            â”‚  â€¢ Socket.IO â†’ Mobile App
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ FCM Push â†’ Device
       â”‚
       â”‚ 12. Real-time update
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Mobile App        â”‚  13. Hiá»ƒn thá»‹ káº¿t quáº£
â”‚   (Patient)         â”‚  â€¢ Chart update
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Alert notification
```

**Thá»i gian xá»­ lÃ½**: < 1 second (end-to-end)

---

### Luá»“ng 2: Appointment Booking Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Patient App    â”‚  1. TÃ¬m kiáº¿m bÃ¡c sÄ©
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ ChuyÃªn khoa: Tim máº¡ch
       â”‚             â€¢ NgÃ y: 2026-01-10
       â”‚ 2. GET /api/doctors?specialty=cardiology
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API        â”‚  3. Query database
â”‚  doctor_controller  â”‚  SELECT * FROM doctors
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  WHERE specialty = 'Cardiology'
       â”‚
       â”‚ 4. Response: Danh sÃ¡ch bÃ¡c sÄ©
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Patient App    â”‚  5. Chá»n bÃ¡c sÄ© & slot time
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Doctor: Dr. Nguyá»…n VÄƒn A
       â”‚             â€¢ Time: 10:00 - 10:30
       â”‚ 6. POST /api/appointments
       â”‚ Body: {doctor_id, date, time_slot, type}
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API        â”‚  7. Validate
â”‚  appointment_serviceâ”‚  â€¢ Check doctor availability
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Check conflicts
       â”‚
       â”‚ 8. Náº¿u valid â†’ Create appointment
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL        â”‚  9. INSERT INTO appointments
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  Status: 'PENDING'
       â”‚
       â”‚ 10. Send notifications
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Notification       â”‚  11. Gá»­i thÃ´ng bÃ¡o
â”‚  Service            â”‚  â€¢ Patient: Booking success
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Doctor: New appointment
       â”‚
       â”‚ 12. Real-time update
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Patient App  â”‚  Doctor App  â”‚  13. UI update
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Luá»“ng 3: Video Call Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Doctor App     â”‚  1. Initiate call
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Call patient_id: 25
       â”‚
       â”‚ 2. Socket.IO emit
       â”‚ Event: 'video_call_request'
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Server     â”‚  3. Route to patient room
â”‚  Socket.IO          â”‚  io.to(`user_25`).emit(...)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. Forward request
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Patient App    â”‚  5. Nháº­n incoming call
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Hiá»ƒn thá»‹ popup
       â”‚             â€¢ Play ringtone
       â”‚ 6. Accept call
       â”‚ Socket.IO emit: 'video_call_accepted'
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Server     â”‚  7. LÆ°u call history
â”‚  call_history_serviceâ”‚ INSERT INTO call_history
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 8. Tráº£ vá» Zego credentials
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Doctor App   â”‚  Patient App â”‚  9. Connect to Zego
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚              â”‚ 10. ZegoCloud SDK
       â”‚              â”‚ â€¢ App ID: xxx
       â”‚              â”‚ â€¢ Room ID: call_123
       â”‚              â”‚ â€¢ Token: yyy
       â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ZegoCloud Server        â”‚  11. P2P Video Stream
â”‚     (External)              â”‚  â€¢ Video codec: H.264
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Audio codec: Opus
                                  â€¢ Bitrate: Auto-adaptive
```

---

### Luá»“ng 4: AI Diagnosis Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MQTT Worker    â”‚  1. Nháº­n vital signs tá»« ESP32
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  {userID: 10, hr: 110, spo2: 88, temp: 38.2}
       â”‚
       â”‚ 2. LÆ°u raw data
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL        â”‚  3. INSERT health_records
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. Trigger AI prediction
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Predict Service    â”‚  5. Láº¥y thÃªm dá»¯ liá»‡u user
â”‚  predict_service.js â”‚  â€¢ Age, Gender, Medical history
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 6. Feature engineering
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Feature Vector     â”‚  7. TÃ­nh toÃ¡n features
â”‚                     â”‚  â€¢ BMI = weight / (height^2)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ MAP = (SYS + 2*DIA) / 3
       â”‚                  â€¢ Age group, etc.
       â”‚ 8. Normalize (StandardScaler)
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TensorFlow.js      â”‚  9. Load MLP model
â”‚  MLP Model          â”‚  â€¢ Input: [11 features]
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Hidden layers: [64, 32]
       â”‚                  â€¢ Output: [3 classes]
       â”‚ 10. Predict
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Prediction Result  â”‚  11. Parse output
â”‚                     â”‚  â€¢ Class 0: Low Risk (0.1)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Class 1: Medium Risk (0.2)
       â”‚                  â€¢ Class 2: High Risk (0.7) âœ“
       â”‚
       â”‚ 12. Save result
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL        â”‚  13. INSERT ai_predictions
â”‚                     â”‚  (record_id, model, result, confidence)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 14. Náº¿u High Risk â†’ Send alert
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Notification       â”‚  15. Gá»­i cáº£nh bÃ¡o kháº©n cáº¥p
â”‚  Service            â”‚  â€¢ Socket.IO real-time
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ FCM push notification
       â”‚                  â€¢ Email alert (optional)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Patient App    â”‚  16. Hiá»ƒn thá»‹ cáº£nh bÃ¡o
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Alert banner
                      â€¢ Recommendation
```

---

## â­ TÃNH NÄ‚NG Ná»”I Báº¬T

### 1. Real-time IoT Monitoring

**MÃ´ táº£**: Theo dÃµi cÃ¡c chá»‰ sá»‘ sá»©c khá»e theo thá»i gian thá»±c tá»« thiáº¿t bá»‹ Ä‘eo ESP32.

**CÃ´ng nghá»‡**:
- ESP32 â†’ MQTT â†’ Backend â†’ Socket.IO â†’ Mobile App
- Latency: < 1 second
- Sampling rate: 2Hz (500ms)

**Chá»‰ sá»‘ theo dÃµi**:
| Metric | Range | Unit | Sensor |
|--------|-------|------|--------|
| Heart Rate | 40-200 | BPM | MAX30102 |
| SpO2 | 70-100 | % | MAX30102 |
| Temperature | 35-42 | Â°C | MLX90614 |
| ECG Signal | 0-3.3V | mV | AD8232 |

**Alert Thresholds**:
```javascript
{
  heart_rate: { min: 50, max: 120 },
  spo2: { min: 90, max: 100 },
  temperature: { min: 36, max: 38 }
}
```

---

### 2. AI-Powered Health Prediction

**Model 1: Heart Disease Risk (MLP)**

```
Input Features (11):
  1. Age
  2. Gender
  3. Heart Rate
  4. SpO2
  5. Temperature
  6. Systolic BP
  7. Diastolic BP
  8. BMI (calculated)
  9. MAP (calculated)
  10. Pulse Pressure (calculated)
  11. Age Group (encoded)

Output Classes:
  0: Low Risk (Safe)
  1: Medium Risk (Monitor)
  2: High Risk (Alert) âš ï¸

Performance:
  - Accuracy: 89.3%
  - Precision: 87.2%
  - Recall: 91.5%
  - F1-Score: 89.3%
```

**Model 2: ECG Classification (CNN)**

```
Input: 187 ECG samples (time-series)
Architecture:
  - Conv1D layers
  - MaxPooling
  - Dense layers
  - Dropout for regularization

Output Classes (5):
  0: Normal Sinus Rhythm
  1: Premature Ventricular Contraction (PVC)
  2: Premature Atrial Contraction (PAC)
  3: Right Bundle Branch Block (RBBB)
  4: Left Bundle Branch Block (LBBB)

Accuracy: 95.8%
```

---

### 3. Video Consultation (ZegoCloud)

**Features**:
- âœ… HD Video (720p/1080p)
- âœ… Clear Audio (Opus codec)
- âœ… Screen Sharing
- âœ… Virtual Background
- âœ… Recording (optional)
- âœ… Chat in-call

**Call Flow**:
1. Doctor initiates call
2. Backend validates & logs
3. Patient receives notification
4. Accept â†’ Connect to Zego room
5. P2P streaming starts
6. Call ends â†’ Save history & duration

**Tech Specs**:
```
SDK: zego_uikit_prebuilt_call 4.22.2
Protocol: WebRTC
Codec: H.264 (video), Opus (audio)
Bitrate: Adaptive (500kbps - 2Mbps)
Latency: < 200ms
```

---

### 4. Real-time Chat (Socket.IO)

**Features**:
- âœ… 1-on-1 messaging (Patient â†” Doctor)
- âœ… Text, Image, File sharing
- âœ… Typing indicators
- âœ… Read receipts
- âœ… Message history
- âœ… Unread count badges

**Message Types**:
```javascript
{
  TEXT: "Hello doctor",
  IMAGE: "image_url",
  FILE: "file_url",
  PRESCRIPTION: "prescription_id",
  APPOINTMENT: "appointment_id"
}
```

**Real-time Events**:
```javascript
// Client â†’ Server
socket.emit('send_message', { to, message, type });
socket.emit('typing', { to, isTyping: true });

// Server â†’ Client
socket.on('new_message', (message) => { ... });
socket.on('user_typing', ({ from, isTyping }) => { ... });
```

---

### 5. E-Prescription System

**Workflow**:
1. Doctor creates prescription after consultation
2. Select medications from database (10,000+ drugs)
3. Add dosage, frequency, duration, notes
4. Digital signature (Doctor ID)
5. Save to database
6. Patient receives notification
7. View in app or download PDF

**Medication Database**:
- 10,000+ medications
- Vietnamese drug registry
- Generic & brand names
- Dosage forms, strengths
- Manufacturer info
- Active ingredients

**Prescription Fields**:
```sql
{
  id: UUID,
  patient_id: INT,
  doctor_id: INT,
  appointment_id: INT,
  diagnosis: TEXT,
  items: [
    {
      medication_id: INT,
      dosage: "500mg",
      frequency: "2 láº§n/ngÃ y",
      duration: "7 ngÃ y",
      quantity: 14,
      instructions: "Uá»‘ng sau Äƒn"
    }
  ],
  notes: TEXT,
  created_at: TIMESTAMP
}
```

---

### 6. Medication Reminders

**Features**:
- âœ… Multiple medications
- âœ… Custom schedules (daily, weekly)
- âœ… Push notifications
- âœ… Mark as taken/skipped
- âœ… Adherence tracking
- âœ… Low stock alerts

**Reminder Logic**:
```javascript
Frequency Options:
  - Once daily (8:00 AM)
  - Twice daily (8:00 AM, 8:00 PM)
  - Three times (8:00 AM, 1:00 PM, 8:00 PM)
  - Four times (6:00 AM, 12:00 PM, 6:00 PM, 10:00 PM)
  - Custom time

Notification:
  - 15 minutes before scheduled time
  - Sound + Vibration
  - Persistent until acknowledged
```

---

### 7. Health Analytics & Charts

**Metrics Tracked**:
- Heart Rate trend (7/30/90 days)
- SpO2 trend
- Temperature trend
- Blood Pressure trend
- Weight/BMI trend
- AI Risk score history

**Chart Types**:
```
Line Chart: Time-series data
Bar Chart: Daily/weekly averages
Pie Chart: Risk distribution
Gauge Chart: Current status
```

**Export Options**:
- PDF report
- CSV data
- Share with doctor

---

## ğŸ” Báº¢O Máº¬T

### Authentication & Authorization

**JWT-based Authentication**:
```javascript
Token Structure:
{
  header: { alg: "HS256", typ: "JWT" },
  payload: {
    userId: 123,
    email: "user@example.com",
    role: "PATIENT", // or "DOCTOR"
    iat: 1704451200,
    exp: 1704537600  // 24h expiry
  },
  signature: "..."
}

Access Control:
  - PATIENT: Own data only
  - DOCTOR: Assigned patients
  - ADMIN: Full access
```

**Password Security**:
- Hashing: bcrypt (salt rounds: 10)
- Min length: 8 characters
- Reset via email OTP (5-minute expiry)

---

### Data Encryption

**In Transit**:
```
HTTPS: TLS 1.3
MQTT: TLS/SSL on port 8883
WebSocket: WSS (Secure WebSocket)
Database: SSL connection
```

**At Rest**:
```
Database:
  - Sensitive fields encrypted (AES-256)
  - Passwords: bcrypt hashed
  
Files:
  - Cloudinary: Encrypted storage
  - Access control: Signed URLs
```

---

### MQTT Security

**HiveMQ Cloud Config**:
```javascript
{
  host: "xxx.s1.eu.hivemq.cloud",
  port: 8883,  // TLS/SSL
  protocol: "mqtts",
  username: "DoAn1",
  password: "Th123321",
  rejectUnauthorized: true,
  qos: 1  // At least once delivery
}
```

**Topic Access Control**:
```
Publish:
  - Devices only: health/medical/data, health/ecg/data

Subscribe:
  - Backend only: health/+/data
```

---

### API Security

**Rate Limiting**:
```javascript
{
  windowMs: 15 * 60 * 1000,  // 15 minutes
  max: 100,  // Max 100 requests per window
  message: "Too many requests"
}
```

**Input Validation**:
- All inputs sanitized
- SQL injection prevention (parameterized queries)
- XSS prevention (escape HTML)
- File upload validation (type, size)

**CORS Policy**:
```javascript
{
  origin: [
    "http://localhost:3001",  // Next.js dev
    "app://health-iot",       // Flutter app
    "https://admin.healthiot.com"
  ],
  credentials: true
}
```

---

## ğŸ“š TÃ€I LIá»†U CHI TIáº¾T

Má»—i module cÃ³ tÃ i liá»‡u riÃªng chi tiáº¿t:

### Backend
- **[HealthAI_Server/DOCUMENTATION.md](./HealthAI_Server/DOCUMENTATION.md)**
  - Cáº¥u trÃºc thÆ° má»¥c
  - API endpoints chi tiáº¿t
  - Database schema
  - Services & business logic
  - Background workers
  - Deployment guide

### Mobile App
- **[App/DOCUMENTATION.md](./App/DOCUMENTATION.md)**
  - Project structure
  - Screen flows
  - State management
  - API integration
  - Socket.IO & MQTT
  - Build & release

### IoT Firmware
- **[ESP32_firmware/DOCUMENTATION.md](./ESP32_firmware/DOCUMENTATION.md)**
  - Hardware setup
  - Sensor integration
  - WiFi configuration
  - MQTT implementation
  - Power management
  - Troubleshooting

### Admin Dashboard
- **[Web_admin/DOCUMENTATION.md](./Web_admin/DOCUMENTATION.md)**
  - UI components
  - Data fetching
  - Authentication
  - Analytics dashboard
  - Deployment

---

## ğŸš€ ROADMAP

### Version 1.0 (Current) âœ…
- âœ… Core telemedicine features
- âœ… IoT real-time monitoring
- âœ… AI health prediction (MLP)
- âœ… Video calling
- âœ… E-prescription
- âœ… Medication reminders

### Version 1.1 (Q1 2026) ğŸ”œ
- ğŸ”œ ECG CNN model integration
- ğŸ”œ Group chat (Doctor â†” Multiple patients)
- ğŸ”œ Family account linking
- ğŸ”œ Health insurance integration
- ğŸ”œ Multi-language support (English, Vietnamese)

### Version 2.0 (Q2 2026) ğŸ“‹
- ğŸ“‹ Wearable integration (Apple Watch, Fitbit)
- ğŸ“‹ Blockchain for medical records
- ğŸ“‹ Advanced analytics dashboard
- ğŸ“‹ AI chatbot (symptom checker)
- ğŸ“‹ Lab test result integration

### Version 3.0 (Future) ğŸ’¡
- ğŸ’¡ AR/VR consultation room
- ğŸ’¡ Genetic health risk prediction
- ğŸ’¡ Mental health monitoring
- ğŸ’¡ Ambulance dispatch integration
- ğŸ’¡ Hospital EHR system integration

---

## ğŸ“ Há»– TRá»¢ & LIÃŠN Há»†

**GitHub Repository**: [buithan04/Health_IoT](https://github.com/buithan04/Health_IoT)

**Documentation Issues**: Náº¿u cÃ³ tháº¯c máº¯c vá» tÃ i liá»‡u, vui lÃ²ng táº¡o issue trÃªn GitHub.

---

**Cáº­p nháº­t láº§n cuá»‘i**: 05/01/2026  
**Version**: 1.0.0  
**TÃ¡c giáº£**: Health IoT Team
